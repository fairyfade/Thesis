<nav class="navbar navbar-expand-sm navbar-dark" style="background-color: #191970;">
  <div class="container-fluid ">
  <a class="navbar-brand " href="#">Space Python</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-end" id="navbarSupportedContent">
    <ul class="navbar-nav ">
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="/parent_dashboard">Parent Dashboard</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="/viewProgress">Progress/Acheivements</a>
    </li>		
    <li class="nav-item">
      <a class="nav-link" href="/manage_account">Manage Account</a>
    </li>	
    </ul>		  
  </div>
  </div>
</nav>
<h2>Student Registration Information</h2><br/>
<form id="registerForm"> <!-- Register form -->
    <label for="firstName"> <!--Student First name label-->
      Student First Name:
    </label>
    <input name="firstName" id="firstName" placeholder="Student First Name" required>
    <br/><br/>
    <label for="lastName"> <!--Student Last Name label-->
      Student Last Name:
    </label>
    <input name="lastName" id="lastName" placeholder="Student Last Name" required>
    <br/><br/>
    <label for="username"> <!--Student Username label-->
      Student Username:
    </label>
    <input name="username" id="username" placeholder="Student Username" required>
    <br/><br/>
    <label for="password"> <!--Student Password label-->
      Student Password:
    </label>
    <input type="password" name="password" id="password" placeholder="Student Password" required>
    <br/><br/>
    <label for="confirmPassword"> <!-- Confirm password label -->
      Confirm Password
    </label>
    <input type="password" name="confirmPassword" id="confirmPassword" placeholder="Confirm Password" required> <!-- Confirm password input -->
    <br/><br/>
    <button id="cancel">Cancel</button> <!-- Cancel button -->
    <button type="submit" id="register">Register</button> <!-- Register button -->
    </form>

    <script>

      function initPage() { // Initialize the page
        $("#cancel").on("click", () => { // When the cancel button is clicked
          window.location.href = "/"; // Redirect to the home page
        });
        $("#registerForm").on("submit", async (e) => { // When the register form is submitted
          e.preventDefault(); // Prevent the form from submitting
          //let userId = req.session.userId;
          let firstName = $("#firstName").val(); // Get the first name
          let lastName = $("#lastName").val(); // Get the last name
          let username = $("#username").val(); // Get the username
          let password = $("#password").val(); // Get the password
          let confirmPassword = $("#confirmPassword").val(); // Get the confirm password
          if (password !== confirmPassword) { // If the passwords do not match
            Swal.fire({ // Display an error message
              icon: 'error',
              text: "Passwords do not match"
            })
          } else { // If the passwords match
            $.ajax({ // Send a request to the server to register the user
              type: 'GET',
              url: "/student/register",
              dataType: 'json',
              contentType: 'json',
              async: false,
              data: {firstName: firstName, lastName: lastName, username: username, password: password}, // Send the user's information
              success: (data) => { // When the request is successful
                if (data.error) { // If there is an error
                  Swal.fire({ // Display the error message
                    icon: 'error',
                    text: data.error

                  })
                } else { // If there is no error
                  window.location.href = "/parent_dashboard"; // Redirect to the home page
                  console.log("Successfully created student account")
                }
              },
              error: async (err) => { // When the request fails
                Swal.fire({ // Display an error message
                  icon: 'error',
                  text: "An error occurred"
                })
              }
            });
          }
          return false; // Prevent the form from submitting
        });
      }
      
      $(document).ready(() => { // When the page is ready
        initPage(); // Initialize the page
      });
</script>
      
      